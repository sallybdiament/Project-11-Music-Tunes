(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(21),s=a.n(i),c=(a(29),a(3)),o=a(4),u=a(6),l=a(5),d=a(13),j=a(7),b=a(14),p=a(2),h=a.n(p),m=a(8),f=a(0),v=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-favorites",children:"Carregando..."})}}]),a}(r.a.Component),O=v,g="user",x=function(e){return localStorage.setItem(g,JSON.stringify(e))},S=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},k=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(g));null===t&&(t={}),S(t)(e)}))},I=function(e){return new Promise((function(t){x(Object(b.a)(Object(b.a)({},{name:"",email:"",image:"",description:""}),e)),S("OK")(t)}))},y=function(e){return new Promise((function(t){x(Object(b.a)({},e)),S("OK")(t)}))},w=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={headerName:"",isLoading:!1},e.componentDidMount=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:a=t.sent,e.setState({headerName:a.name}),e.setState({isLoading:!0});case 5:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.headerName,a=e.isLoading;return Object(f.jsx)("div",{"data-testid":"header-component",children:a?Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{"data-testid":"header-user-name",children:t}),Object(f.jsx)("h1",{children:"Trybe Tunes"}),Object(f.jsxs)("nav",{children:[Object(f.jsx)(d.b,{to:"/search","data-testid":"link-to-search",children:"Search"}),Object(f.jsx)(d.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favorites"}),Object(f.jsx)(d.b,{to:"/profile","data-testid":"link-to-profile",children:"Profile"})]})]}):Object(f.jsx)(O,{})})}}]),a}(r.a.Component),N=w,C=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=C,L=a(24),A="favorite_songs";JSON.parse(localStorage.getItem(A))||localStorage.setItem(A,JSON.stringify([]));var F=function(){return JSON.parse(localStorage.getItem(A))},E=function(e){return localStorage.setItem(A,JSON.stringify(e))},U=function(e){return function(t){setTimeout((function(){t(e)}),500)}},P=function(){return new Promise((function(e){var t=F();U(t)(e)}))},B=function(e){return new Promise((function(t){if(e){var a=F();E([].concat(Object(L.a)(a),[e]))}U("OK")(t)}))},J=function(e){return new Promise((function(t){var a=F();E(a.filter((function(t){return t.trackId!==e.trackId}))),U("OK")(t)}))},M=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={favorite:!1,isLoading:!1,removeFavorite:!1},e.onCheckboxChange=Object(m.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({isLoading:!0}),a=e.state.favorite,n=e.props,r=n.objeto,!n.removeFromFavorite){t.next=9;break}return t.next=6,J(r);case 6:e.setState({removeFavorite:!0}),t.next=20;break;case 9:if(a){t.next=16;break}return t.next=12,B(r);case 12:e.setState({isLoading:!1}),e.setState({favorite:!0}),t.next=20;break;case 16:return t.next=18,J(r);case 18:e.setState({isLoading:!1}),e.setState({favorite:!1});case 20:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.props.objeto.favorita&&e.setState({favorite:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.trackName,a=e.previewUrl,n=e.trackId,r=this.state,i=r.favorite,s=r.isLoading,c=r.removeFavorite;return console.log(this.props),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Favoritas"}),c?null:Object(f.jsxs)("article",{children:[Object(f.jsx)("p",{children:t}),Object(f.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," "," ",Object(f.jsx)("code",{children:"audio"}),"."]}),Object(f.jsxs)("label",{htmlFor:"favorite",children:["Favorita",Object(f.jsx)("input",{type:"checkbox","data-testid":"checkbox-music-".concat(n),name:"favorite",id:"favorite",checked:i,onChange:this.onCheckboxChange})]}),s&&Object(f.jsx)(O,{})]})]})}}]),a}(r.a.Component),T=M,K=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={musicsInfo:[],musics:[],isLoading:!0,favoriteSongs:[]},e.componentDidMount=Object(m.a)(h.a.mark((function t(){var a,n,r,i,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match,n=a.params.id,t.next=4,D(n);case 4:return r=t.sent,i=r[0],s=r.filter((function(e,t){return t>0})),t.next=9,P();case 9:c=t.sent,console.log(c),o=c,e.setState({musicsInfo:i,musics:s,favoriteSongs:o,isLoading:!1});case 13:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.musics,a=e.isLoading,n=e.musicsInfo,r=e.favoriteSongs,i=t.map((function(e){var t=r.some((function(t){return e.trackId===t.trackId}));return Object(b.a)(Object(b.a)({},e),{},{favorita:t})}));return console.log(i),Object(f.jsxs)("div",{"data-testid":"page-album",children:[Object(f.jsx)(N,{}),a?Object(f.jsx)(O,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{"data-testid":"artist-name",children:n.artistName}),Object(f.jsx)("p",{"data-testid":"album-name",children:n.collectionName}),i.map((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(T,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId,objeto:e,favorita:e.favorita})},e.trackId)}))]})]})}}]),a}(r.a.Component),R=K,q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,favoriteSongs:[]},e.componentDidMount=Object(m.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,P();case 3:a=t.sent,n=a.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{favorita:"true"})})),e.setState({favoriteSongs:n,isLoading:!1});case 6:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.favoriteSongs;return Object(f.jsxs)("div",{"data-testid":"page-favorites",children:[Object(f.jsx)(N,{}),"Favorites",t?Object(f.jsx)(O,{}):a.map((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(T,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId,objeto:e,removeFromFavorite:"removeFavorite"})},e.trackId)}))]})}}]),a}(r.a.Component),_=q,z=a(15),G=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={inputName:"",isSaveButtonDisabled:!0,isLoading:!1,isLoggedIn:!1},e.validate=function(){e.state.inputName.length>2?e.setState({isSaveButtonDisabled:!1}):e.setState({isSaveButtonDisabled:!0})},e.onInputChange=function(t){var a=t.target;e.setState(Object(z.a)({},a.name,a.value),(function(){return e.validate()}))},e.handleClick=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.inputName,e.setState({isLoading:!0}),t.next=4,I({name:a});case 4:e.setState({isLoggedIn:!0});case 5:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isSaveButtonDisabled,a=e.inputName,n=e.isLoading,r=e.isLoggedIn;return Object(f.jsxs)("div",{"data-testid":"page-login",children:[n?Object(f.jsx)(O,{}):Object(f.jsxs)("div",{children:[Object(f.jsxs)("label",{htmlFor:"inputName",children:["Insira seu nome de usu\xe1rio:",Object(f.jsx)("input",{type:"text","data-testid":"login-name-input",name:"inputName",id:"inputName",value:a,onChange:this.onInputChange})]}),Object(f.jsx)("button",{type:"submit","data-testid":"login-submit-button",disabled:t,onClick:this.handleClick,children:"Entrar"})]}),r&&Object(f.jsx)(j.a,{to:"/search"})]})}}]),a}(r.a.Component),H=G,Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-not-found",children:"NotFound: p\xe1gina n\xe3o encontrada."})}}]),a}(r.a.Component),V=Q,W=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={userName:"",userEmail:"",userDescription:"",userImg:"",isLoading:!0},e.componentDidMount=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:a=t.sent,console.log(a),e.setState({userName:a.name,userEmail:a.email,userDescription:a.description,userImg:a.image}),e.setState({isLoading:!1});case 6:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.userName,n=e.userEmail,r=e.userDescription,i=e.userImg;return Object(f.jsxs)("div",{"data-testid":"page-profile",children:[Object(f.jsx)(N,{}),t?Object(f.jsx)(O,{}):Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:a}),Object(f.jsx)("p",{children:n}),Object(f.jsx)("p",{children:r}),Object(f.jsx)("img",{"data-testid":"profile-image",src:i,alt:a}),Object(f.jsx)(d.b,{to:"/profile/edit",children:"Editar perfil"})]})]})}}]),a}(r.a.Component),X=W,Y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={userName:"",userEmail:"",userDescription:"",userImg:"",isLoading:!1,isSavebuttonDisabled:!0},e.componentDidMount=function(){e.resgatandoInfoUsuarios(),0!==userName.length&&0!==userEmail.length&&0!==userImg.length&&0!==userDescription.length?e.setState({isSavebuttonDisabled:!1}):e.setState({isSavebuttonDisabled:!0})},e.resgatandoInfoUsuarios=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,k();case 3:a=t.sent,e.setState({isLoading:!1}),e.setState({userName:a.name,userEmail:a.email,userDescription:a.description,userImg:a.image});case 6:case"end":return t.stop()}}),t)}))),e.onInputChange=function(t){var a=t.target,n=a.id,r=a.value;e.setState(Object(z.a)({},n,r));var i=e.state,s=i.userName,c=i.userEmail,o=i.userDescription,u=i.userImg;0!==s.length&&0!==c.length&&0!==u.length&&0!==o.length?e.setState({isSavebuttonDisabled:!1}):e.setState({isSavebuttonDisabled:!0})},e.handleClick=Object(m.a)(h.a.mark((function t(){var a,n,r,i,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.userName,r=a.userEmail,i=a.userDescription,s=a.userImg,c={name:n,email:r,image:s,description:i},console.log("clicou"),e.props.history.push("/profile"),t.next=7,y(c);case 7:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.userName,n=e.userEmail,r=e.userDescription,i=e.userImg,s=e.isSavebuttonDisabled;return Object(f.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(f.jsx)(N,{}),Object(f.jsx)("p",{children:"Profile Edit"}),t?Object(f.jsx)(O,{}):null,Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Formul\xe1rio para editar perfil:"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("label",{htmlFor:"userName",children:["Alterar nome de usu\xe1rio:",Object(f.jsx)("input",{type:"text","data-testid":"edit-input-name",name:"userName",id:"userName",value:a,onChange:this.onInputChange})]}),Object(f.jsxs)("label",{htmlFor:"userEmail",children:["Altere seu email:",Object(f.jsx)("input",{type:"email","data-testid":"edit-input-email",name:"userEmail",id:"userEmail",value:n,onChange:this.onInputChange})]}),Object(f.jsxs)("label",{htmlFor:"userDescription",children:["Altere sua descri\xe7\xe3o:",Object(f.jsx)("input",{type:"text","data-testid":"edit-input-description",name:"userDescription",id:"userDescription",value:r,onChange:this.onInputChange})]}),Object(f.jsxs)("label",{htmlFor:"userImg",children:["Altere sua foto:",Object(f.jsx)("input",{type:"text","data-testid":"edit-input-image",name:"userImg",id:"userImg",value:i,onChange:this.onInputChange})]}),Object(f.jsx)("button",{type:"submit","data-testid":"edit-button-save",disabled:s,onClick:this.handleClick,children:"Salvar"})]})]})]})}}]),a}(r.a.Component),Z=Y,$=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,r,i,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return i=e.sent,s=i.results,c=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=$,te=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.imgUrl,n=e.collectionName,r=e.collectionId;return Object(f.jsx)("article",{children:Object(f.jsxs)(d.b,{to:"/album/".concat(r),"data-testid":"link-to-album-".concat(r),children:[Object(f.jsx)("img",{alt:t,src:a}),Object(f.jsx)("h2",{children:t}),Object(f.jsx)("p",{children:r}),Object(f.jsx)("p",{children:n})]})})}}]),a}(r.a.Component),ae=te,ne=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={searchArtist:"",isSaveButtonDisabled:!0,isLoading:!1,resultsAlbuns:[]},e.validate=function(){e.state.searchArtist.length>1?e.setState({isSaveButtonDisabled:!1}):e.setState({isSaveButtonDisabled:!0})},e.onInputChange=function(t){var a=t.target;e.setState(Object(z.a)({},a.name,a.value),(function(){return e.validate()}))},e.handleShowAlbuns=function(){var t=e.state.searchArtist;e.setState((function(e){return{isLoading:!0,copySearchArtist:e.searchArtist}}),Object(m.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee(t);case 2:n=a.sent,e.setState({resultsAlbuns:n},(function(){e.setState({isLoading:!1,searchArtist:""})}));case 4:case"end":return a.stop()}}),a)}))))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchArtist,a=e.isSaveButtonDisabled,n=e.isLoading,r=e.resultsAlbuns,i=e.copySearchArtist;return Object(f.jsxs)("div",{"data-testid":"page-search",children:[Object(f.jsx)(N,{}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("label",{htmlFor:"searchArtist",children:["Digite o nome da banda ou artista:",Object(f.jsx)("input",{type:"text","data-testid":"search-artist-input",name:"searchArtist",id:"searchArtist",value:t,onChange:this.onInputChange})]}),Object(f.jsx)("button",{type:"submit","data-testid":"search-artist-button",disabled:a,onClick:this.handleShowAlbuns,children:"Pesquisar"})]}),n&&Object(f.jsx)(O,{}),!!r.length&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(i)}),r.map((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(ae,{name:e.artistName,imgUrl:e.artworkUrl100,collectionName:e.collectionName,collectionId:e.collectionId})},e.collectionId)}))]}),0===r.length&&Object(f.jsx)("p",{children:" Nenhum \xe1lbum foi encontrado "})]})}}]),a}(r.a.Component),re=ne,ie=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(f.jsx)(d.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",component:H}),Object(f.jsx)(j.b,{exact:!0,path:"/search",component:re}),Object(f.jsx)(j.b,{exact:!0,path:"/album/:id",component:R}),Object(f.jsx)(j.b,{exact:!0,path:"/favorites",component:_}),Object(f.jsx)(j.b,{exact:!0,path:"/profile/edit",component:Z}),Object(f.jsx)(j.b,{exact:!0,path:"/profile",component:X}),Object(f.jsx)(j.b,{path:"*",component:V})]})})}}]),a}(r.a.Component),se=ie;s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(se,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0b099e05.chunk.js.map